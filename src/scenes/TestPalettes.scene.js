import { Scene } from 'phaser';

/*
|      платформа |       CGA |       VGA |        ZX |       NES |      SEGA |  APPLE II |    PICO-8 | 
|            4:3 | 640 x 480 | 640 x 480 | 640 x 480 | 640 x 480 | 640 x 480 | 640 x 480 | 640 x 480 |
|  оригинал на 8 | 320 х 200 | 320 х 240 | 256 х 192 | 256 х 224 | 320 х 224 | 280 х 192 | 128 х 128 |
| размер спрайта |        16 |        16 |        16 |        16 |        16 |        16 |        24 |
|  блоки бордюра |   0 x 2.5 |   0 x   0 |   4 x   3 |   4 x   1 |   0 x   1 | 2.5 x   3 |  5.33 x 2 |
|   блоки экрана |  40 x  25 |  40 x  30 |  32 x  24 |  32 x  28 |  40 x  28 |  35 х  24 |  16 х  16 |
*/

export class TestPalettes extends Scene {
  constructor () {
    super('TestPalettes')
  }

  preload () {
  }

  create () {
    const palettes = [
      {
        // 00-0F, 10-1F
        name: 'PICO-8',
        rows: 2,
        palette: [
          ['000000','291814'],
          ['1D2B53','111D35'],
          ['7E2553','422136'],
          ['008751','125359'],
          ['AB5236','742F29'],
          ['5F574F','49333B'],
          ['C2C3C7','A28879'],
          ['FFF1E8','F3EF7D'],
          ['FF004D','BE1250'],
          ['FFA300','FF6C24'],
          ['FFEC27','A8E72E'],
          ['00E436','00B543'],
          ['29ADFF','065AB5'],
          ['83769C','754665'],
          ['FF77A8','FF6E59'],
          ['FFCCAA','FF9D81'],
        ],
      },
      {
        // 00-0F, 70-7F
        name: 'NTSC',
        rows: 4,
        palette: [
          ['000000','6C6C6C','B0B0B0','ECECEC'],
          ['444400','848424','B8B840','E8E85C'],
          ['702800','985C28','BC8C4C','DCB468'],
          ['841800','AC5030','D0805C','ECA880'],
          ['880000','B03C3C','D07070','ECA0A0'],
          ['78005C','A03C88','C070B0','DC9CD0'],
          ['480078','783CA4','A070CC','C49CEC'],
          ['140084','4C3CAC','7C70D0','A8A0EC'],
          ['000088','3840B0','6874D0','90A4EC'],
          ['00187C','3854A8','6888CC','90B4EC'],
          ['002C5C','386890','689CC0','90CCE8'],
          ['003C2C','387C64','68B494','90E4C0'],
          ['003C00','407C40','74B474','A4E4A4'],
          ['143800','507C38','84B468','B4E490'],
          ['2C3000','687034','9CA864','CCD488'],
          ['442800','846830','B89C58','E8CC7C'],
        ],
      },
      {
        name: 'PAL',
        rows: 4,
        palette: [
          ['000000','000000','505050','282828'],
          ['ECECEC','D0D0D0','949494','747474'],
          ['E8E85C','B8B840','848424','444400'],
          ['ECC09C','C89870','A0683C','703400'],
          ['EC9CB4','C87084','A03C50','700014'],
          ['D09CD0','B470B0','943C88','70005C'],
          ['C49CEC','A470C8','803CA0','580070'],
          ['B89CEC','9470CC','6C3CA8','3C0080'],
          ['9C9CEC','7070D0','3C3CB0','000088'],
          ['90B4EC','6888C8','3858A0','002070'],
          ['90CCEC','68A4C8','3874A0','003C70'],
          ['9CDCDC','70B8B8','3C8C8C','005C5C'],
          ['9CE8B4','70C484','3C9850','006414'],
          ['C4E89C','A0C070','74903C','445C00'],
          ['ECD09C','CCAC70','A8843C','805800'],
        ],
      },

      {
        // 00-0F
        name: 'ZX',
        rows: 2,
        palette: [
          ['101010','101010'],
          ['1010AA','1010EC'],
          ['AA1010','EC1010'],
          ['AA10AA','EC10EC'],
          ['10AA10','10EC10'],
          ['10AAA0','10ECEC'],
          ['AAAA10','ECEC10'],
          ['AAAAAA','ECECEC'],
        ],
      },
      {
        // 00-0F
        name: 'ZX TV',
        rows: 2,
        palette: [
          ['000000','000000'],
          ['002070','1C3890'],
          ['702800','B03C3C'],
          ['6C2088','9458B4'],
          ['399E39','5CDA5C'],
          ['58A4A4','9CDCDC'],
          ['B8B840','FCFC68'],
          ['B0B0B0','ECECEC'],
        ],
      },
      {
        // 00-0F
        name: 'ZX PASTEL',
        rows: 2,
        palette: [
          ['8854F3','8E65A5'],
          ['FF8C5C','E8B382'],
          ['FF79AE','D8828E'],
          ['63FFBA','93D4B5'],
          ['639BFF','90A9EC'],
          ['FFF982','F0DAB1'],
          ['F6F6F6','E2E8DA'],
        ],
      },
      {
        // 00-0F
        name: 'CGA',
        rows: 2,
        palette: [
          ['101010','555555'],
          ['1010AA','5555EC'],
          ['10AA10','55EC55'],
          ['10AAAA','55ECEC'],
          ['AA1010','EC5555'],
          ['AA10AA','EC55EC'],
          ['AA5510','EEDD88'],
          ['AAAAAA','ECECEC'],
        ],
      },
      {
        // 00-05
        name: 'APPLE II',
        rows: 1,
        palette: [
          ['000000'],
          ['1BCB01'],
          ['E434FE'],
          ['E46501'],
          ['1B9AFE'],
          ['FFFFFF'],
        ],
      },
      {
        // 00-0F, 30-3F
        name: 'NES',
        rows: 4,
        palette: [
          ['59595F','AAAAAA','EEEEEE','EEEEEE'],
          ['00008F','0044DD','4488FF','99CCFF'],
          ['18008F','5511EE','7777FF','AAAAFF'],
          ['3F0077','7700EE','9944FF','BB99FF'],
          ['550055','9900BB','BB44EE','DD99FF'],
          ['550011','AA0055','CC5599','EE99DD'],
          ['550000','993300','DD6644','EEAAAA'],
          ['442200','884400','CC8800','EEBB99'],
          ['333300','666600','BBAA00','EEDD88'],
          ['113300','336600','77BB00','BBDD88'],
          ['003311','006600','22BB22','99DD99'],
          ['004444','006655','22BB77','99DDBB'],
          ['004466','005588','22BBCC','99DDEE'],
          ['000000','080808','444444','AAAAAA'],
        ],
      },
      {
        // 00-0F, 30-3F
        name: 'NES WIKI',
        rows: 4,
        palette: [
          ['4F4F4F','B8B8B8','FEFEFE','FEFEFE'],
          ['002A88','155FDA','64B0FE','C1E0FE'],
          ['1412A8','4240FE','9390FE','D4D3FE'],
          ['3B00A4','7627FF','C777FE','E9C8FE'],
          ['5C007E','A11BCD','F36AFE','FBC3FE'],
          ['6E0040','B81E7C','FE6ECD','FEC5EB'],
          ['6C0700','B53220','FE8270','FECDC6'],
          ['571D00','994F00','EB9F23','F7D9A6'],
          ['343500','6C6E00','BDBF00','E5E695'],
          ['0C4900','388700','89D900','D0F097'],
          ['005200','0D9400','5DE530','BEF5AB'],
          ['004F08','009032','45E182','B4F3CD'],
          ['00404E','007C8E','48CEDF','B5ECF3'],
          ['000000','000000','666666','AEAEAE'],
        ],
      },
      {
        // 00-0F, 30-3F
        name: 'SNES',
        rows: 4,
        palette: [
          ['262726','514F4C','887E83','B3AAC0'],
          ['1B377F','147ABF','40AFDD','B2DBF4'],
          ['181667','3B2C96','706AE1','8F95EE'],
          ['440A41','812593','CC4BB9','EC99DB'],
          ['3F0011','B31C35','EF2064','F26282'],
          ['960811','E81813','A75D69','EC9EA4'],
          ['560D04','C43611','E26A12','F0AF66'],
          ['2A1A14','5D342A','A66E46','DF9C6E'],
          ['8E4E11','D89511','EAD11E','F5EB6B'],
          ['2F541C','5A831B','A2BB1E','C6DF6B'],
          ['0F450F','008B12','0BCB12','3EF33F'],
          ['115153','0C8563','04BF79','6AE6AA'],
          ['314047','596D62','929C74','C8C5A3'],
          ['000000','000000','26232F','FCFCFC'],
        ],
      },
      {
        // 00-0F, 70-7F
        name: 'NTSC',
        rows: 8,
        palette: [
          ['000000','404040','6C6C6C','909090','B0B0B0','C8C8C8','DCDCDC','ECECEC'],
          ['444400','646410','848424','A0A034','B8B840','D0D050','E8E85C','FCFC68'],
          ['702800','844414','985C28','AC783C','BC8C4C','CCA05C','DCB468','ECC878'],
          ['841800','983418','AC5030','C06848','D0805C','E09470','ECA880','FCBC94'],
          ['880000','9C2020','B03C3C','C05858','D07070','E08888','ECA0A0','FCB4B4'],
          ['78005C','8C2074','A03C88','B0589C','C070B0','D084C0','DC9CD0','ECB0E0'],
          ['480078','602090','783CA4','8C58B8','A070CC','B484DC','C49CEC','D4B0FC'],
          ['140084','302098','4C3CAC','6858C0','7C70D0','9488E0','A8A0EC','BCB4FC'],
          ['000088','1C209C','3840B0','505CC0','6874D0','7C8CE0','90A4EC','A4B8FC'],
          ['00187C','1C3890','3854A8','5070BC','6888CC','7C9CDC','90B4EC','A4C8FC'],
          ['002C5C','1C4C78','386890','5084AC','689CC0','7CB4D4','90CCE8','A4E0FC'],
          ['003C2C','1C5C48','387C64','509C80','68B494','7CD0AC','90E4C0','A4FCD4'],
          ['003C00','205C20','407C40','5C9C5C','74B474','8CD08C','A4E4A4','B8FCB8'],
          ['143800','345C1C','507C38','6C9850','84B468','9CCC7C','B4E490','C8FCA4'],
          ['2C3000','4C501C','687034','848C4C','9CA864','B4C078','CCD488','E0EC9C'],
          ['442800','644818','846830','A08444','B89C58','D0B46C','E8CC7C','FCE08C'],
        ],
      },
      {
        name: 'PAL',
        rows: 8,
        palette: [
          ['000000','282828','505050','747474','949494','B4B4B4','D0D0D0','ECECEC'],
          ['703400','885020','A0683C','B48458','C89870','DCAC84','ECC09C','FCD4B0'],
          ['700014','882034','A03C50','B4586C','C87084','DC849C','EC9CB4','FCB0C8'],
          ['70005C','842074','943C88','A8589C','B470B0','C484C0','D09CD0','E0B0E0'],
          ['580070','6C2088','803CA0','9458B4','A470C8','B484DC','C49CEC','D4B0FC'],
          ['3C0080','542094','6C3CA8','8058BC','9470CC','A884DC','B89CEC','C8B0FC'],
          ['000088','20209C','3C3CB0','5858C0','7070D0','8484E0','9C9CEC','B0B0FC'],
          ['002070','1C3C88','3858A0','5074B4','6888C8','7CA0DC','90B4EC','A4C8FC'],
          ['003C70','1C5888','3874A0','508CB4','68A4C8','7CB8DC','90CCEC','A4E0FC'],
          ['005C5C','207474','3C8C8C','58A4A4','70B8B8','84C8C8','9CDCDC','B0ECEC'],
          ['006414','208034','3C9850','58B06C','70C484','84D89C','9CE8B4','B0FCC8'],
          ['445C00','5C7820','74903C','8CAC58','A0C070','B0D484','C4E89C','D4FCB0'],
          ['805800','947020','A8843C','BC9C58','CCAC70','DCC084','ECD09C','FCE0B0'],
        ],
      },
      {
        // 00-0F, 10-1F
        name: 'PICO-8',
        rows: 2,
        palette: [
          ['000000','291814'],
          ['1D2B53','111D35'],
          ['7E2553','422136'],
          ['008751','125359'],
          ['AB5236','742F29'],
          ['5F574F','49333B'],
          ['C2C3C7','A28879'],
          ['FFF1E8','F3EF7D'],
          ['FF004D','BE1250'],
          ['FFA300','FF6C24'],
          ['FFEC27','A8E72E'],
          ['00E436','00B543'],
          ['29ADFF','065AB5'],
          ['83769C','754665'],
          ['FF77A8','FF6E59'],
          ['FFCCAA','FF9D81'],
        ],
      },
    ];
    
    const w = 24;
    const h = 12;
    let newRow = 0;

    palettes.forEach((pal, n) => {
      console.log(n, pal.rows, newRow);
      this.add.text(
        0,
        newRow,
        pal.name,
        { fontSize: `${h}px`, fill: '#FFF' },
      );
      pal?.palette?.forEach((i, row) => {
        i.forEach((val, col) => {
          this.add.rectangle(row * w + w / 2, col * h + h / 2 + newRow + h, w, h, `0x${val}`);
        });
      });
      newRow = newRow + (1.5 + pal.rows) * h;
    });
  }

  update () {
  }
}
